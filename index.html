<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>The Control Room</title>
	<link rel="stylesheet" type="text/css" href="style/style.css">
</head>
<body>

<h2>Final Projects</h2>
<p>See the Final Projects in Real Time</p>

<div id="commit-messages-wrap"></div>

<!-- Riot.js Templates for use around the app with javascript -->
<div id="templates">
  <script type="text/template"  class="commit">
    <div class="commit-message { recent }" data-repo="{ id }">
        <strong>{ user }:</strong> { message }<br />
        <small>{ date }</small>
    </div>
  </script>
</div>


<!-- The Javascripts -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<!-- Utility functions -->
<script src="js/utils.js"></script>
<!-- Riot.js -->
<script src="js/vendor/riot.js"></script>
<!-- Riot.js Models -->
<script src="js/models/repos-json.js"></script>
<script src="js/models/repos.js"></script>
<!-- Riot.js Presenters -->
<script src="js/presenters/repo-commits.js"></script>
<script type="text/javascript">
	$(document).ready(function() {

		// Loop through the repos
		for (var key in repos) {
		   var obj = repos[key];
		   var user, repo;
		   for (var prop in obj) {
		      // important check that this is objects own property
		      // not from prototype prop inherited
		      if(obj.hasOwnProperty(prop)){
		      	if (prop === "user") { user = obj[prop] }
		      	if (prop === "repo") { repo = obj[prop] }
		        // console.log("Link to repo: ", prop + " = " + obj[prop]);
		      }
		   }
		   var repoUrl = "https://api.github.com/repos/" + user + "/" + repo + "/commits";
		   console.log('Link to repo: ', repoUrl);
		   // renderRepo(repo, repoUrl, "#commit-messages-wrap");
		   x = new githubRepo(repo, repoUrl, "#commit-messages-wrap");
		   x.render();
		}

		// get the data back from github API
		// x = new githubRepo('recruit', 'https://api.github.com/repos/makersquare/recruit/commits', "#commit-messages-wrap")
		// x.render()

		// var renderRepo = function(repoName, repoUrl, root) {
		// 	x = new githubRepo(repoName, repoUrl, root);
		// 	x.render();
		// };

	});
</script>

</body>
</html>